<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.1//EN"
"http://www.w3.org/TR/xhtml11/DTD/xhtml11.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <title>Pocket Money - Calendar</title>
    <link rel="manifest" href="manifest.json" />
    <link rel="icon" type="image/png" href="./icon512.png" />
    <meta name="apple-mobile-wep-app-capable" content="yes" />
    <meta name="mobile-web-app-capable" content="yes" />
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="stylesheet" href="/styles/index.css?t=1768852079225" fetchpriority="high" />
    <link rel="stylesheet" href="/styles/calendar/row.css?t=1768852079225" />
    <link rel="stylesheet" href="/styles/calendar/year.css?t=1768852079225" />
  </head>
  <body>
    <script type="module">
      import init, * as wasm from "/script/pkg/wasm.js?t=1768852079225";
      import { View, Listener, route, colorSchema } from "/script/calendar.js?t=1768852079225";
      window.__wasm = wasm;
      colorSchema.render();
      const namespace = route.getNamespace(window.location.search);
      const view = new View();;
      view.prerender();
      init().then(() => view.render());

      document
        .querySelector("body")
        .addEventListener("click", new Listener(namespace).handler);
    </script>

    <div id="main" onclick="void(0);">
      <div id="container-list" class="container-list" ></div>
      <div id="quota"></div>
      <div id="quota-usage"></div>
    </div>
    <script>
      navigator.storage.estimate()
        .then(s => {
          document.querySelector('#quota').textContent = `quota ${s.quota / 2**30} Gb`;
          document.querySelector('#quota-usage')
            .textContent = `quota usage ${s.usage / 2**30} Gb`;
        })
    </script>
  </body>
</html>

<template id="template-list">
  <h1 __action="list/on-top" class="title-sticky">&#160;</h1>
  <div class="list-container" __action="list/todo">
    <h1 __action="list/todo" id="list-title" class="title" >Календарь</h1>
    <div class="list-year">2025</div>
    <div id="list-row-2025"></div>
    <div class="list-year">2026</div>
    <div id="list-row-2026"></div>
  </div>
</template>

<template id="template-row">
  <div class="row-container">
    <div class="row-month">
      <a __action="ns/skip" id="row-link" class="row-link"></a>
    </div>
    <span id="row-sum" class="row-sum"></span>
    <a 
      id="row-download" 
      __action="download"
      class="row-download"
      download="" 
    >
      csv
    </a>
  </div>
</template>
